https://www.youtube.com/watch?v=zDlg64fsQow&t=2s
event loop не является частью движка. Предоставляется средой, может быть разным.

Связвается с движком через Web api (в браузере)

# Работа setTimeout
1. Попадает в Call stack
2. Попадает в web api
3. Ждёт там время
4. Попадает в очередь задач
5. Попадает в Call stack на выполнение
# Работа addEventListener
1.  Попадает в Call stack
2. web api регистрирует слушатель события(ждёт там нажатия)
3. После нажатия попадает в очередь задач
4. Попадает в call stack
Слушатели событий удаляются только явно из кода

# Промисы и setTimeOut(0ms)

``` js
log('1')

setTimeout(() => {
	log('2')
}, 0)

Promise.resolve().then(() => {
	log('3')
})

log('4')

1-4-3-2
```
Объяснение
Очереди 2 
1. Макрозадачи (очередь событий)(ждёт выполнения всех микрозадач)
	1. Таймаут(после того, как таймер закончился. До этого он находится в Web api)
2. Микрозадача (очередь задач)(выполняется в первую очередь)
	1. Промисы
# Микротаски и макротаски
Микротаски (очередь задач)
Макротаски (очередь событий)

Всегда вперёд выполняются микротаски все, потом выполняется 1 макротаска(затем проверяется и выполняются микротаски)

## Макротаски (очередь событий)
1. Таймеры
2. События(клик, Загрузка изображений и тд)
3. Браузерные события(рендер и тд)[[Render (отрисовка)]]
## Микротаски (очередь задач)
1. Промисы
2. quereMicrotask
	1. Явное создание микротаски
3. [[mutationObserver]]
	1. Слежка за dom нодами

Пример тут
``` js
console.log('1');

setTimeout(() => {
	console.log('setTimeout 1');
	Promise.resolve().then(() => {
		console.log('promise setTimeout');
	})
}, 0)

setTimeout(() => {
	console.log('setTimeout 2');
}, 0)

Promise.resolve().then(() => {
	console.log('promise 1');
})

Promise.resolve().then(() => {
	console.log('promise 2')
})

console.log('4')
```

Ответ:  1, 4, promise 1, promise 2, setTimeout 1, promise setTimeout, setTimeout 2

